{% extends 'base.html' %}

{% block content %}
    <a href="{% url 'post:post_list' %}" style="text-decoration: none; color: black"><h1>Post List</h1></a>
    {% for post in posts %}
        <div id="post-{{ post.pk }}">
            <!-- 이미지 -->
            <a href="{% url 'post:post_detail' post_pk=post.pk %}">
                <img id="img_{{ post.pk }}" src="{{ post.photo.url }}" alt="" class="img-responsive"/>
            </a>
            <!-- 사진 삭제 -->
            <form action="{% url 'post:post_delete' post_pk=post.pk %}" method="post">
                {% csrf_token %}
                <button class="btn btn-danger btn-xs" style="margin-top: 10px;">사진 삭제</button>
            </form>
            <br/>
            <!-- 댓글 출력 -->
            {% if post.comments.count %}
                <ul class="center-block" id="post-comments-{{ post.pk }}">
                    {% for comment in post.comments.all %}
                        <li>{{ comment.content }} -
                            <!-- 댓글 삭제 -->
                            <form action="{% url 'post:comment_delete' comment_pk=comment.pk %}" method="post"
                                  style="display: inline-block;">
                                {% csrf_token %}
                                <button class="btn btn-warning btn-xs">댓글 삭제</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
            <!-- 댓글 작성 -->
            <form action="{% url 'post:comment_create' post_pk=post.pk %}?next=/post/#post-comments-{{ post.pk }}"
                  method="post">
                {% csrf_token %}
                {{ comment_form }}
                <button class="btn btn-primary btn-block">댓글 작성</button>
            </form>
        </div>
        <hr/>
    {% endfor %}
{% endblock %}